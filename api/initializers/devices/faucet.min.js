var _0x5a47=['actionEndBy','closed','unitExponent','debug','faucet\x20\x27','trunc','faucet','litersPerSecond','exports','now','get','state','log','status','getInternalState','stringify','toFixed','unit','\x27\x20status\x20to\x20\x27','getState','timerIndex','getDispensedQuantity','opened','\x27\x20new\x20status\x20is\x20\x27\x20+\x20\x27','events','changing\x20faucet\x20\x27','toLiter','timers','\x27...','\x27\x20is\x20already\x20\x27','add','open','info','statusChanged','devices','pow','quantity','actionTimerIndex','fromLiter','push'];(function(_0x3b0e3f,_0x5a47b9){var _0x33f741=function(_0x4371a8){while(--_0x4371a8){_0x3b0e3f['push'](_0x3b0e3f['shift']());}};_0x33f741(++_0x5a47b9);}(_0x5a47,0x15c));var _0x33f7=function(_0x3b0e3f,_0x5a47b9){_0x3b0e3f=_0x3b0e3f-0x0;var _0x33f741=_0x5a47[_0x3b0e3f];return _0x33f741;};module[_0x33f7('0x14')]={'initialize':function(_0x7fa634,_0x2f76e4){_0x7fa634[_0x33f7('0x6')]['faucet']=class{constructor(_0x29fdf6,_0x542f6d){this['id']=_0x29fdf6;if(!_0x542f6d||_0x542f6d[_0x33f7('0xc')]&&_0x542f6d[_0x33f7('0xc')]<=Date['now']()){this[_0x33f7('0x17')]={'status':_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')]['closed'],'quantity':null,'unit':null,'actionEndBy':null,'actionTimerIndex':null};}else{this[_0x33f7('0x17')]=_0x542f6d;}}[_0x33f7('0x1f')](){if(this[_0x33f7('0x17')][_0x33f7('0x19')]!=_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')][_0x33f7('0xd')]){if(this[_0x33f7('0x17')][_0x33f7('0xc')]){if(this[_0x33f7('0x17')][_0x33f7('0xc')]<=Date[_0x33f7('0x15')]()){return{'status':_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')]['closed']};}else{return{'status':this[_0x33f7('0x17')][_0x33f7('0x19')],'quantity':this[_0x33f7('0x17')]['quantity'],'unit':this[_0x33f7('0x17')][_0x33f7('0x1d')],'dispensedQuantity':this[_0x33f7('0x21')]()};}}}return{'status':this[_0x33f7('0x17')][_0x33f7('0x19')]};}[_0x33f7('0x1a')](){return this[_0x33f7('0x17')];}[_0x33f7('0x3')](){return new Promise((_0x11a679,_0x1ba02e)=>{var _0x108009=_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')]['opened'];_0x7fa634[_0x33f7('0x18')](_0x33f7('0x25')+this['id']+_0x33f7('0x1e')+_0x108009+_0x33f7('0x0'),_0x33f7('0xf'));if(this[_0x33f7('0x17')][_0x33f7('0x19')]==_0x108009){_0x7fa634[_0x33f7('0x18')](_0x33f7('0x10')+this['id']+_0x33f7('0x1')+_0x108009+'\x27',_0x33f7('0x4'));_0x11a679(![]);}else{this[_0x33f7('0x17')]['status']=_0x108009;_0x7fa634[_0x33f7('0x18')]('faucet\x20\x27'+this['id']+_0x33f7('0x23')+_0x108009+'\x27',_0x33f7('0x4'));_0x7fa634['events'][_0x33f7('0xb')](this['id'],_0x33f7('0x5'),{'newStatus':_0x108009});_0x11a679(!![]);}});}['close'](){return new Promise((_0x468ebe,_0x1940e6)=>{var _0x551718=_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')]['closed'];_0x7fa634[_0x33f7('0x18')](_0x33f7('0x25')+this['id']+_0x33f7('0x1e')+_0x551718+_0x33f7('0x0'),'debug');if(this[_0x33f7('0x17')][_0x33f7('0x19')]==_0x551718){_0x7fa634[_0x33f7('0x18')](_0x33f7('0x10')+this['id']+_0x33f7('0x1')+_0x551718+'\x27',_0x33f7('0x4'));_0x468ebe(![]);}else{if(this[_0x33f7('0x17')][_0x33f7('0x9')]){var _0x2052c5=_0x7fa634[_0x33f7('0x27')][_0x33f7('0x16')](this[_0x33f7('0x17')][_0x33f7('0x9')]);if(_0x2052c5){clearTimeout(this[_0x33f7('0x17')]['actionTimerIndex']);}this[_0x33f7('0x17')][_0x33f7('0xc')]=null;this[_0x33f7('0x17')][_0x33f7('0x20')]=null;}this[_0x33f7('0x17')]['status']=_0x551718;_0x7fa634[_0x33f7('0x18')](_0x33f7('0x10')+this['id']+_0x33f7('0x23')+_0x551718+'\x27',_0x33f7('0x4'));_0x7fa634[_0x33f7('0x24')]['push'](this['id'],_0x33f7('0x5'),{'newStatus':_0x551718});_0x468ebe(!![]);}});}['dispense'](_0x191989,_0x5dd351){return new Promise((_0xa2395b,_0xae434c)=>{_0x7fa634[_0x33f7('0x18')](_0x33f7('0x25')+this['id']+'\x27\x20status\x20to\x20\x27'+_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')][_0x33f7('0x22')]+_0x33f7('0x0'),_0x33f7('0xf'));if(this[_0x33f7('0x17')][_0x33f7('0x19')]==_0x7fa634['devices'][_0x33f7('0x12')][_0x33f7('0x19')][_0x33f7('0x22')]){_0x7fa634[_0x33f7('0x18')](_0x33f7('0x10')+this['id']+'\x27\x20is\x20already\x20\x27'+_0x7fa634[_0x33f7('0x6')]['faucet']['status'][_0x33f7('0x22')]+'\x27',_0x33f7('0x4'));_0xa2395b(![]);}else{this[_0x33f7('0x17')][_0x33f7('0x8')]=_0x191989;this[_0x33f7('0x17')][_0x33f7('0x1d')]=_0x5dd351;var _0x2b66f1=_0x7fa634[_0x33f7('0x6')]['faucet']['toLiter'](_0x191989,_0x5dd351);var _0x299ce1=_0x2b66f1/_0x7fa634['devices'][_0x33f7('0x12')][_0x33f7('0x13')];this['state'][_0x33f7('0xc')]=Date[_0x33f7('0x15')]()+_0x299ce1*0x3e8;var _0x1851d4=setTimeout(()=>{this['state'][_0x33f7('0xc')]=null;this['state'][_0x33f7('0x20')]=null;_0x7fa634[_0x33f7('0x18')](_0x33f7('0x10')+this['id']+'\x27\x20new\x20status\x20is\x20\x27'+_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')][_0x33f7('0xd')]+'\x27',_0x33f7('0x4'));_0x7fa634[_0x33f7('0x24')][_0x33f7('0xb')](this['id'],_0x33f7('0x5'),{'newStatus':_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')]['closed']});},_0x299ce1*0x3e8);this[_0x33f7('0x17')][_0x33f7('0x20')]=_0x7fa634[_0x33f7('0x27')][_0x33f7('0x2')](_0x1851d4);this[_0x33f7('0x17')][_0x33f7('0x19')]=_0x7fa634[_0x33f7('0x6')]['faucet'][_0x33f7('0x19')][_0x33f7('0x22')];_0x7fa634[_0x33f7('0x18')]('faucet\x20\x27'+this['id']+'\x27\x20new\x20status\x20is\x20\x27'+this[_0x33f7('0x17')][_0x33f7('0x19')],_0x33f7('0x4'));_0x7fa634[_0x33f7('0x24')][_0x33f7('0xb')](this['id'],_0x33f7('0x5'),{'newStatus':this[_0x33f7('0x17')][_0x33f7('0x19')]});_0xa2395b(!![]);}});}['getDispensedQuantity'](){if(this[_0x33f7('0x17')][_0x33f7('0x19')]==_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x19')][_0x33f7('0xd')]||this[_0x33f7('0x17')]['actionEndBy']&&this[_0x33f7('0x17')][_0x33f7('0xc')]<=Date[_0x33f7('0x15')]())return null;else{var _0x219547=Math[_0x33f7('0x11')](this[_0x33f7('0x17')][_0x33f7('0xc')]-Date[_0x33f7('0x15')]())/0x3e8;var _0x3f80a4=_0x219547*_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x13')];var _0x3e8146=_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0x26')](this[_0x33f7('0x17')][_0x33f7('0x8')],this['state'][_0x33f7('0x1d')]);var _0x12c0db=_0x3e8146-_0x3f80a4;return _0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0xa')](_0x12c0db,this[_0x33f7('0x17')][_0x33f7('0x1d')]);}}['toString'](){return JSON[_0x33f7('0x1b')](this);}static[_0x33f7('0x26')](_0x245a26,_0x281174){return _0x245a26*Math[_0x33f7('0x7')](0xa,_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')][_0x33f7('0xe')][_0x281174]);}static[_0x33f7('0xa')](_0x4a252,_0xff783b){return+(_0x4a252/Math[_0x33f7('0x7')](0xa,_0x7fa634[_0x33f7('0x6')][_0x33f7('0x12')]['unitExponent'][_0xff783b]))[_0x33f7('0x1c')](0x2);}static get[_0x33f7('0xe')](){return{'ml':-0x3,'cl':-0x2,'dl':-0x1,'l':0x0,'dal':0x1,'hl':0x2,'kl':0x3};}static get[_0x33f7('0x19')](){return{'opened':'opened','closed':_0x33f7('0xd')};}static get[_0x33f7('0x13')](){return 0xc/0x3c;}};return _0x2f76e4();}};